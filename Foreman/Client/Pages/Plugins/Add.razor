@page "/plugin/{componentName}/add/{courseId:int}"
@inject IComponentService ComponentService
<EditForm OnValidSubmit="AddModule">
    <DataAnnotationsValidator/>

    @dynamicComponent()
    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary" Size="Size.Large" FullWidth="true">Add</MudButton>
</EditForm>


@code{
    [Parameter]
    public string componentName { get; set; }
    [Parameter]
    public int courseId { get; set; }

    RenderFragment dynamicComponent() => builder =>
    {
        var component = ComponentService.GetComponentByPage(componentName+"add");
        builder.OpenComponent(0,component.Component);

        for (int i = 0; i < component.Parameters.Count; i++)
        {
            var attribute = component.Parameters.ElementAt(i);
            builder.AddAttribute(i+1,attribute.Key,attribute.Value);
        }
        builder.AddAttribute(component.Parameters.Count, "CourseId", courseId);

        builder.CloseComponent();
    };

    public async Task AddModule()
    {
        
    }
}