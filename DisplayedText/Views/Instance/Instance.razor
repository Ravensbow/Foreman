@inject IHttpClientFactory http

@if(instance != null)
{
    <Foreman.PluginManager.Components.InstanceComponent CourseId="instance.CourseId" MenuOptions="menu">
        <MudText Typo="Typo.subtitle1">@instance?.Name</MudText>
        <MudText Typo="Typo.body2">@instance?.Content</MudText>
    </Foreman.PluginManager.Components.InstanceComponent>
}

@code {
    [Parameter]
    public int InstanceId { get; set; }

    List<Tuple<string, string>> menu = new List<Tuple<string, string>> { new Tuple<string, string>("Edit", ""), new Tuple<string, string>("Delete", "") };
    HttpClient? httpClient;
    Data.Text? instance;

    protected override async Task OnInitializedAsync()
    {
        httpClient = http.CreateClient("Foreman.ServerAPI");

        var result = await httpClient.GetAsync($"displayedtext/management/{InstanceId}");

        if (!result.IsSuccessStatusCode)
        {
            //TODO: Komunikat
            return;
        }
        instance = await result.Content.ReadFromJsonAsync<Data.Text>();
    }
}
